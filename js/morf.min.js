/*
 Morf v0.1.5
 http://www.joelambert.co.uk/morf

 Copyright 2011, Joe Lambert.
 Free to use under the MIT license.
 http://www.opensource.org/licenses/mit-license.php
 
 Extra easing functions borrowed from scripty2 (c) 2005-2010 Thomas Fuchs (MIT Licence) 
 https://raw.github.com/madrobby/scripty2/master/src/effects/transitions/transitions.js
*/
var Morf=function(d,a,c){var f={},l={};document.createElement("div");var o=document.createElement("div"),e={timingFunction:"ease",duration:null,increment:0.01,debug:false,optimise:true,decimalPlaces:5},q=rule=ruleName=camel=m1=m2=progress=frame=rule=transEvent=val=null,k="",p=this,b={},g="anim"+(new Date).getTime(),h=function(){d.removeEventListener("webkitAnimationEnd",h,true);transEvent=document.createEvent("Event");transEvent.initEvent("webkitTransitionEnd",true,true);d.dispatchEvent(transEvent);
d.style.webkitTransitionTimingFunction=null;d.style.webkitTransitionDuration=0;e.callback&&e.callback(d)},n=function(t){if(document.styleSheets&&document.styleSheets.length)document.styleSheets[0].insertRule(t,0);else{var u=document.createElement("style");u.innerHTML=t;document.head.appendChild(u)}},s=function(t,u){var r="@-webkit-keyframes "+u+" {\n",w=pos=rule=null,v="";for(pos in t){w=t[pos];v="\t"+pos+" {\n";for(rule in w)v+="\t\t"+p.util.toDash(rule)+": "+w[rule]+";\n";v+="\t}\n\n";r+=v}if(e.optimise){r=
r+" }";w=void 0;w=typeof e.decimalPlaces=="number"?e.decimalPlaces:5;v=r.match(/[0-9\.]+/gm);var x=0;if(v)for(x=0;x<v.length;x++)r=r.replace(v[x],parseFloat(parseFloat(v[x]).toFixed(w)));r=r}else r=r+" }";return r},y=function(t){var u=t.match(/scale[Y|X|Z]*\([0-9, ]*0[,0-9 ]*\)/g),r=0;if(u)for(r=0;r<u.length;r++)t=t.replace(u[r],u[r].replace(/([^0-9])0([^0.9])/g,"$10.0001$2"));return t};for(q in c)e[q]=c[q];if(e.timingFunction==="ease"||e.timingFunction==="linear"||e.timingFunction==="ease-in"||e.timingFunction===
"ease-out"||e.timingFunction==="ease-in-out"||/^cubic-bezier/.test(e.timingFunction)){d.style.webkitTransitionDuration=e.duration;d.style.webkitTransitionTimingFunction=e.timingFunction;var z=function(){d.removeEventListener("webkitTransitionEnd",z,true);d.style.webkitTransitionDuration=0;d.style.webkitTransitionTimingFunction=null;e.callback&&setTimeout(function(){e.callback(d)},10)};d.addEventListener("webkitTransitionEnd",z,true);setTimeout(function(){for(rule in a){camel=p.util.toCamel(rule);
d.style[camel]=a[rule]}},10);this.css=""}else{d.style.webkitTransitionTimingFunction=null;d.style.webkitTransitionDuration=0;k+=e.timingFunction;for(rule in a){camel=this.util.toCamel(rule);o.style[camel]=a[rule];f[rule]=camel=="WebkitTransform"?new WebKitCSSMatrix(y(window.getComputedStyle(d)["-webkit-transform"])):window.getComputedStyle(d)[rule];l[rule]=camel=="WebkitTransform"?new WebKitCSSMatrix(y(o.style.WebkitTransform)):o.style[camel];f[rule]=f[rule]==(val=parseInt(f[rule],10))?val:f[rule];
l[rule]=l[rule]==(val=parseInt(f[rule],10))?val:l[rule];k+=";"+rule+":"+f[rule]+"->"+l[rule]}if(Morf.cache[k]){this.css=Morf.cache[k].css;g=Morf.cache[k].name}else{if(f["-webkit-transform"]){m1=f["-webkit-transform"].decompose();m2=l["-webkit-transform"].decompose()}for(progress=0;progress<=1;progress+=e.increment){frame=Tweenable.util.interpolate(f,l,progress,e.timingFunction);if(m1!==null&&m2!==null)frame["-webkit-transform"]=m1.tween(m2,progress,Tweenable.prototype.formula[e.timingFunction]);b[parseInt(progress*
100,10)+"%"]=frame}b["100%"]=l;this.css=s(b,g);n(this.css);Morf.cache[k]={css:this.css,name:g}}for(rule in l)d.style[this.util.toCamel(rule)]=l[rule];d.addEventListener("webkitAnimationEnd",h,true);d.style.webkitAnimationDuration=e.duration;d.style.webkitAnimationTimingFunction="linear";d.style.webkitAnimationName=g;e.debug&&window.console&&window.console.log&&console.log(this.css)}};Morf.transition=function(d,a,c){return new Morf(d,a,c)};Morf.cache={};Morf.version="0.1.5";Morf.prototype.util={};
Morf.prototype.util.toDash=function(d){d=d.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()});return/^webkit/.test(d)?"-"+d:d};Morf.prototype.util.toCamel=function(d){return d.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})};
(function(){var d=function(c,f,l,o){this.x=c?c:0;this.y=f?f:0;this.z=l?l:0;this.w=o?o:0;this.checkValues=function(){this.x=this.x?this.x:0;this.y=this.y?this.y:0;this.z=this.z?this.z:0;this.w=this.w?this.w:0};this.length=function(){this.checkValues();return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};this.normalise=function(){var e=this.length();return new d(this.x/e,this.y/e,this.z/e)};this.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w};this.cross=function(e){return new d(this.y*
e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)};this.combine=function(e,q,k){return new d(q*this.x+k*e.x,q*this.y+k*e.y,q*this.z+k*e.z)}},a=function(c){c===undefined&&(c={});var f={perspective:null,translate:null,skew:null,scale:null,rotate:null},l;for(l in f)this[l]=c[l]?c[l]:new d;this.tween=function(o,e,q){if(q===undefined)q=function(h){return h};o||(o=new a((new WebKitCSSMatrix).decompose()));var k=new a,p=index=null,b="";e=q(e);for(index in f)for(p in{x:"x",y:"y",z:"z",w:"w"})k[index][p]=
(this[index][p]+(o[index][p]-this[index][p])*e).toFixed(5);b="matrix3d(1,0,0,0, 0,1,0,0, 0,0,1,0, "+k.perspective.x+", "+k.perspective.y+", "+k.perspective.z+", "+k.perspective.w+") translate3d("+k.translate.x+"px, "+k.translate.y+"px, "+k.translate.y+"px) rotateX("+k.rotate.x+"rad) rotateY("+k.rotate.y+"rad) rotateZ("+k.rotate.z+"rad) matrix3d(1,0,0,0, 0,1,0,0, 0,"+k.skew.z+",1,0, 0,0,0,1) matrix3d(1,0,0,0, 0,1,0,0, "+k.skew.y+",0,1,0, 0,0,0,1) matrix3d(1,0,0,0, "+k.skew.x+",1,0,0, 0,0,1,0, 0,0,0,1) scale3d("+
k.scale.x+", "+k.scale.y+", "+k.scale.z+")";try{return k=new WebKitCSSMatrix(b)}catch(g){console.error("Invalid matrix string: "+b);return""}}};WebKitCSSMatrix.prototype.tween=function(c,f,l){if(l===undefined)l=function(q){return q};var o=new WebKitCSSMatrix,e=this.decompose();c=c.decompose();o.decompose();trans="";index=i=null;return e.tween(c,f,l)};WebKitCSSMatrix.prototype.transformVector=function(c){return new d(this.m11*c.x+this.m12*c.y+this.m13*c.z,this.m21*c.x+this.m22*c.y+this.m23*c.z,this.m31*
c.x+this.m32*c.y+this.m33*c.z)};WebKitCSSMatrix.prototype.transpose=function(){var c=new WebKitCSSMatrix,f=m=0;for(f=0;f<=2;f++)for(m=f+1;m<=3;m++){c["m"+(f+1)+(m+1)]=this["m"+(m+1)+(f+1)];c["m"+(m+1)+(f+1)]=this["m"+(f+1)+(m+1)]}return c};WebKitCSSMatrix.prototype.determinant=function(){return this.m14*this.m23*this.m32*this.m41-this.m13*this.m24*this.m32*this.m41-this.m14*this.m22*this.m33*this.m41+this.m12*this.m24*this.m33*this.m41+this.m13*this.m22*this.m34*this.m41-this.m12*this.m23*this.m34*
this.m41-this.m14*this.m23*this.m31*this.m42+this.m13*this.m24*this.m31*this.m42+this.m14*this.m21*this.m33*this.m42-this.m11*this.m24*this.m33*this.m42-this.m13*this.m21*this.m34*this.m42+this.m11*this.m23*this.m34*this.m42+this.m14*this.m22*this.m31*this.m43-this.m12*this.m24*this.m31*this.m43-this.m14*this.m21*this.m32*this.m43+this.m11*this.m24*this.m32*this.m43+this.m12*this.m21*this.m34*this.m43-this.m11*this.m22*this.m34*this.m43-this.m13*this.m22*this.m31*this.m44+this.m12*this.m23*this.m31*
this.m44+this.m13*this.m21*this.m32*this.m44-this.m11*this.m23*this.m32*this.m44-this.m12*this.m21*this.m33*this.m44+this.m11*this.m22*this.m33*this.m44};WebKitCSSMatrix.prototype.decompose=function(){var c=new WebKitCSSMatrix(this.toString()),f=rightHandSide=inversePerspectiveMatrix=transposedInversePerspectiveMatrix=perspective=translate=row=i=scale=skew=pdum3=rotate=null;if(c.m33==0)return new a((new WebKitCSSMatrix).decompose());for(i=1;i<=4;i++)for(j=1;j<=4;j++)c["m"+i+j]/=c.m44;f=c;for(i=1;i<=
3;i++)f["m"+i+"4"]=0;f.m44=1;if(f.determinant()==0)return new a((new WebKitCSSMatrix).decompose());if(c.m14!=0||c.m24!=0||c.m34!=0){rightHandSide=new d(c.m14,c.m24,c.m34,c.m44);inversePerspectiveMatrix=f.inverse();transposedInversePerspectiveMatrix=inversePerspectiveMatrix.transpose();perspective=transposedInversePerspectiveMatrix.transformVector(rightHandSide);c.m14=c.m24=c.m34=0;c.m44=1}else perspective=new d(0,0,0,1);translate=new d(c.m41,c.m42,c.m43);c.m41=0;c.m42=0;c.m43=0;row=[new d,new d,new d];
for(i=1;i<=3;i++){row[i-1].x=c["m"+i+"1"];row[i-1].y=c["m"+i+"2"];row[i-1].z=c["m"+i+"3"]}scale=new d;skew=new d;scale.x=row[0].length();row[0]=row[0].normalise();skew.x=row[0].dot(row[1]);row[1]=row[1].combine(row[0],1,-skew.x);scale.y=row[1].length();row[1]=row[1].normalise();skew.x/=scale.y;skew.y=row[0].dot(row[2]);row[2]=row[2].combine(row[0],1,-skew.y);skew.z=row[1].dot(row[2]);row[2]=row[2].combine(row[1],1,-skew.z);scale.z=row[2].length();row[2]=row[2].normalise();skew.y/=scale.z;skew.y/=
scale.z;pdum3=row[1].cross(row[2]);if(row[0].dot(pdum3)<0)for(i=0;i<3;i++){scale.x*=-1;row[i].x*=-1;row[i].y*=-1;row[i].z*=-1}rotate=new d;rotate.y=Math.asin(-row[0].z);if(Math.cos(rotate.y)!=0){rotate.x=Math.atan2(row[1].z,row[2].z);rotate.z=Math.atan2(row[0].y,row[0].x)}else{rotate.x=Math.atan2(-row[2].x,row[1].y);rotate.z=0}return new a({perspective:perspective,translate:translate,skew:skew,scale:scale,rotate:rotate})}})();
(function(d){function a(){return+new Date}function c(b,g){for(var h in b)b.hasOwnProperty(h)&&g(b,h)}function f(b,g){c(g,function(h,n){b[n]=h[n]});return b}function l(b,g){c(g,function(h,n){typeof b[n]==="undefined"&&(b[n]=h[n])});return b}function o(b,g,h){var n;b=(b-g.timestamp)/g.duration;for(n in h.current)h.current.hasOwnProperty(n)&&g.to.hasOwnProperty(n)&&(h.current[n]=g.originalState[n]+(g.to[n]-g.originalState[n])*g.easingFunc(b));return h.current}function e(b,g,h,n){var s;for(s=0;s<g[b].length;s++)g[b][s].apply(h,
n)}function q(b,g,h){c(d.Tweenable.prototype.filter,function(n,s){n[s][b]&&n[s][b].apply(g,h)})}function k(b,g){var h;h=a();h<b.timestamp+b.duration&&g.isAnimating?(q("beforeTween",b.owner,[g.current,b.originalState,b.to]),o(h,b,g),q("afterTween",b.owner,[g.current,b.originalState,b.to]),b.hook.step&&e("step",b.hook,b.owner,[g.current]),b.step.call(g.current),g.loopId=setTimeout(function(){k(b,g)},1E3/b.owner.fps)):b.owner.stop(true)}function p(b){b=b||{};this._hook={};this._tweenParams={owner:this,
hook:this._hook};this._state={};this._state.current=b.initialState||{};this.fps=b.fps||30;this.easing=b.easing||"linear";this.duration=b.duration||500;return this}p.prototype.tween=function(b,g,h,n,s){var y=this;if(!this._state.isAnimating)return this._state.loopId=0,this._state.pausedAtTime=null,g?(this._tweenParams.step=function(){},this._state.current=b||{},this._tweenParams.to=g||{},this._tweenParams.duration=h||this.duration,this._tweenParams.callback=n||function(){},this._tweenParams.easing=
s||this.easing):(this._tweenParams.step=b.step||function(){},this._tweenParams.callback=b.callback||function(){},this._state.current=b.from||{},this._tweenParams.to=b.to||b.target||{},this._tweenParams.duration=b.duration||this.duration,this._tweenParams.easing=b.easing||this.easing),this._tweenParams.timestamp=a(),this._tweenParams.easingFunc=this.formula[this._tweenParams.easing]||this.formula.linear,l(this._state.current,this._tweenParams.to),l(this._tweenParams.to,this._state.current),q("tweenCreated",
this._tweenParams.owner,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]),this._tweenParams.originalState=f({},this._state.current),this._state.isAnimating=true,setTimeout(function(){k(y._tweenParams,y._state)},1E3/this.fps),this};p.prototype.to=function(b,g,h,n){typeof g==="undefined"?(b.from=this.get(),this.tween(b)):this.tween(this.get(),b,g,h,n);return this};p.prototype.get=function(){return this._state.current};p.prototype.set=function(b){this._state.current=b||{};return this};
p.prototype.stop=function(b){clearTimeout(this._state.loopId);this._state.isAnimating=false;b&&(f(this._state.current,this._tweenParams.to),this._tweenParams.callback.call(this._state.current));return this};p.prototype.pause=function(){clearTimeout(this._state.loopId);this._state.pausedAtTime=a();this._state.isPaused=true;return this};p.prototype.resume=function(){var b=this;this._state.isPaused&&(this._tweenParams.timestamp+=this._state.pausedAtTime-this._tweenParams.timestamp);setTimeout(function(){k(b._tweenParams,
b._state)},1E3/this.fps);return this};p.prototype.hookAdd=function(b,g){this._hook.hasOwnProperty(b)||(this._hook[b]=[]);this._hook[b].push(g)};p.prototype.hookRemove=function(b,g){var h;if(this._hook.hasOwnProperty(b))if(g)for(h=this._hook[b].length;h>=0;h++)this._hook[b][h]===g&&this._hook[b].splice(h,1);else this._hook[b]=[]};p.prototype.filter={};p.util={now:a,each:c,tweenProps:o,applyFilter:q,simpleCopy:f};p.prototype.formula={linear:function(b){return b}};d.Tweenable=p})(this);
(function(d){d.Tweenable.util.simpleCopy(d.Tweenable.prototype.formula,{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},easeInOutQuad:function(a){if((a/=0.5)<1)return 0.5*Math.pow(a,2);return-0.5*((a-=2)*a-2)},easeInCubic:function(a){return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){if((a/=0.5)<1)return 0.5*Math.pow(a,3);return 0.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-
1,4)-1)},easeInOutQuart:function(a){if((a/=0.5)<1)return 0.5*Math.pow(a,4);return-0.5*((a-=2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,5)},easeOutQuint:function(a){return Math.pow(a-1,5)+1},easeInOutQuint:function(a){if((a/=0.5)<1)return 0.5*Math.pow(a,5);return 0.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return a==
0?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return a==1?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){if(a==0)return 0;if(a==1)return 1;if((a/=0.5)<1)return 0.5*Math.pow(2,10*(a-1));return 0.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){if((a/=0.5)<1)return-0.5*(Math.sqrt(1-a*a)-1);return 0.5*(Math.sqrt(1-(a-=2)*a)+1)},easeOutBounce:function(a){return a<1/2.75?7.5625*
a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},easeInBack:function(a){return a*a*(2.70158*a-1.70158)},easeOutBack:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},easeInOutBack:function(a){var c=1.70158;if((a/=0.5)<1)return 0.5*a*a*(((c*=1.525)+1)*a-c);return 0.5*((a-=2)*a*(((c*=1.525)+1)*a+c)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin((a*6-1)*2*Math.PI/2)+1},swingFromTo:function(a){var c=1.70158;return(a/=0.5)<
1?0.5*a*a*(((c*=1.525)+1)*a-c):0.5*((a-=2)*a*(((c*=1.525)+1)*a+c)+2)},swingFrom:function(a){return a*a*(2.70158*a-1.70158)},swingTo:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},bounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bouncePast:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?2-(7.5625*(a-=1.5/2.75)*a+0.75):a<2.5/2.75?2-(7.5625*(a-=2.25/2.75)*a+0.9375):2-(7.5625*(a-=2.625/2.75)*
a+0.984375)},easeFromTo:function(a){if((a/=0.5)<1)return 0.5*Math.pow(a,4);return-0.5*((a-=2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,0.25)}})})(this);
(function(d){if(d.Tweenable){d.Tweenable.util.interpolate=function(a,c,f,l){var o;if(a&&a.from){c=a.to;f=a.position;l=a.easing;a=a.from}o=d.Tweenable.util.simpleCopy({},a);d.Tweenable.util.applyFilter("tweenCreated",o,[o,a,c]);d.Tweenable.util.applyFilter("beforeTween",o,[o,a,c]);f=d.Tweenable.util.tweenProps(f,{originalState:a,to:c,timestamp:0,duration:1,easingFunc:d.Tweenable.prototype.formula[l]||d.Tweenable.prototype.formula.linear},{current:o});d.Tweenable.util.applyFilter("afterTween",f,[f,
a,c]);return f};d.Tweenable.prototype.interpolate=function(a,c,f){a=d.Tweenable.util.interpolate(this.get(),a,c,f);this.set(a);return a}}})(this);(function(){var d={spring:function(c){return 1-Math.cos(c*4.5*Math.PI)*Math.exp(-c*6)},sinusoidal:function(c){return-Math.cos(c*Math.PI)/2+0.5}},a;for(a in d)Tweenable.prototype.formula[a]=d[a]})();
